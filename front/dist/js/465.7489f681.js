"use strict";(self["webpackChunkCriarCertoManager"]=self["webpackChunkCriarCertoManager"]||[]).push([[465],{5125:function(t,e,s){s(6699);var i=s(7678),a=s(2500),r=s(4712);e["Z"]=(0,i.Z)(a.Z,(0,r.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),s={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?s.shouldValidate=t.$watch("shouldValidate",(i=>{i&&(this.errorBag.hasOwnProperty(t._uid)||(s.valid=e(t)))})):s.valid=e(t),s},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const s=this.watchers.find((t=>t._uid===e._uid));s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},266:function(t,e,s){s(6699),s(1884);var i=s(144),a=s(1767),r=s(5352);const n=["sm","md","lg","xl"],o=(()=>n.reduce(((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t)),{}))(),l=(()=>n.reduce(((t,e)=>(t["offset"+(0,r.jC)(e)]={type:[String,Number],default:null},t)),{}))(),c=(()=>n.reduce(((t,e)=>(t["order"+(0,r.jC)(e)]={type:[String,Number],default:null},t)),{}))(),u={col:Object.keys(o),offset:Object.keys(l),order:Object.keys(c)};function d(t,e,s){let i=t;if(null!=s&&!1!==s){if(e){const s=e.replace(t,"");i+=`-${s}`}return"col"!==t||""!==s&&!0!==s?(i+=`-${s}`,i.toLowerCase()):i.toLowerCase()}}const h=new Map;e["Z"]=i["default"].extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...o,offset:{type:[String,Number],default:null},...l,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:s,children:i,parent:r}){let n="";for(const a in e)n+=String(e[a]);let o=h.get(n);if(!o){let t;for(t in o=[],u)u[t].forEach((s=>{const i=e[s],a=d(t,s,i);a&&o.push(a)}));const s=o.some((t=>t.startsWith("col-")));o.push({col:!s||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),h.set(n,o)}return t(e.tag,(0,a.ZP)(s,{class:o}),i)}})},1713:function(t,e,s){s(6699),s(1884);var i=s(144),a=s(1767),r=s(5352);const n=["sm","md","lg","xl"],o=["start","end","center"];function l(t,e){return n.reduce(((s,i)=>(s[t+(0,r.jC)(i)]=e(),s)),{})}const c=t=>[...o,"baseline","stretch"].includes(t),u=l("align",(()=>({type:String,default:null,validator:c}))),d=t=>[...o,"space-between","space-around"].includes(t),h=l("justify",(()=>({type:String,default:null,validator:d}))),p=t=>[...o,"space-between","space-around","stretch"].includes(t),m=l("alignContent",(()=>({type:String,default:null,validator:p}))),v={align:Object.keys(u),justify:Object.keys(h),alignContent:Object.keys(m)},f={align:"align",justify:"justify",alignContent:"align-content"};function g(t,e,s){let i=f[t];if(null!=s){if(e){const s=e.replace(t,"");i+=`-${s}`}return i+=`-${s}`,i.toLowerCase()}}const b=new Map;e["Z"]=i["default"].extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:c},...u,justify:{type:String,default:null,validator:d},...h,alignContent:{type:String,default:null,validator:p},...m},render(t,{props:e,data:s,children:i}){let r="";for(const a in e)r+=String(e[a]);let n=b.get(r);if(!n){let t;for(t in n=[],v)v[t].forEach((s=>{const i=e[s],a=g(t,s,i);a&&n.push(a)}));n.push({"no-gutters":e.noGutters,"row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),b.set(r,n)}return t(e.tag,(0,a.ZP)(s,{staticClass:"row",class:n}),i)}})},9422:function(t,e,s){s.d(e,{Z:function(){return n}});var i=s(8846),a=s(7678),r=s(5352),n=(0,a.Z)(i.Z).extend({name:"v-responsive",props:{aspectRatio:[String,Number],contentClass:String},computed:{computedAspectRatio(){return Number(this.aspectRatio)},aspectStyle(){return this.computedAspectRatio?{paddingBottom:1/this.computedAspectRatio*100+"%"}:void 0},__cachedSizer(){return this.aspectStyle?this.$createElement("div",{style:this.aspectStyle,staticClass:"v-responsive__sizer"}):[]}},methods:{genContent(){return this.$createElement("div",{staticClass:"v-responsive__content",class:this.contentClass},(0,r.z9)(this))}},render(t){return t("div",{staticClass:"v-responsive",style:this.measurableStyles,on:this.$listeners},[this.__cachedSizer,this.genContent()])}})},1023:function(t,e,s){s.d(e,{Z:function(){return v}});var i=s(573),a=s(7069),r=s(144),n=r["default"].extend({name:"rippleable",directives:{ripple:a.Z},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),o=s(6174),l=s(7678);function c(t){t.preventDefault()}var u=(0,l.Z)(i.Z,n,o.Z).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some((e=>this.valueComparator(e,t))):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=i.Z.options.methods.genLabel.call(this);return t?(t.data.on={click:c},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:c},ref:"input"})},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const s=e.length;e=e.filter((e=>!this.valueComparator(e,t))),e.length===s&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown(t){}}}),d=s(4802),h=s(7394),p=s(3305),m=s(5352),v=u.extend({name:"v-switch",directives:{Touch:d.Z},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...i.Z.options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...e}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(h.b0,{},[!1===this.loading?null:this.$slots.progress||this.$createElement(p.Z,{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(t){(t.keyCode===m.Do.left&&this.isActive||t.keyCode===m.Do.right&&!this.isActive)&&this.onChange()}}})},4802:function(t,e,s){var i=s(5352);const a=t=>{const{touchstartX:e,touchendX:s,touchstartY:i,touchendY:a}=t,r=.5,n=16;t.offsetX=s-e,t.offsetY=a-i,Math.abs(t.offsetY)<r*Math.abs(t.offsetX)&&(t.left&&s<e-n&&t.left(t),t.right&&s>e+n&&t.right(t)),Math.abs(t.offsetX)<r*Math.abs(t.offsetY)&&(t.up&&a<i-n&&t.up(t),t.down&&a>i+n&&t.down(t))};function r(t,e){const s=t.changedTouches[0];e.touchstartX=s.clientX,e.touchstartY=s.clientY,e.start&&e.start(Object.assign(t,e))}function n(t,e){const s=t.changedTouches[0];e.touchendX=s.clientX,e.touchendY=s.clientY,e.end&&e.end(Object.assign(t,e)),a(e)}function o(t,e){const s=t.changedTouches[0];e.touchmoveX=s.clientX,e.touchmoveY=s.clientY,e.move&&e.move(Object.assign(t,e))}function l(t){const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:t=>r(t,e),touchend:t=>n(t,e),touchmove:t=>o(t,e)}}function c(t,e,s){const a=e.value,r=a.parent?t.parentElement:t,n=a.options||{passive:!0};if(!r)return;const o=l(e.value);r._touchHandlers=Object(r._touchHandlers),r._touchHandlers[s.context._uid]=o,(0,i.XP)(o).forEach((t=>{r.addEventListener(t,o[t],n)}))}function u(t,e,s){const a=e.value.parent?t.parentElement:t;if(!a||!a._touchHandlers)return;const r=a._touchHandlers[s.context._uid];(0,i.XP)(r).forEach((t=>{a.removeEventListener(t,r[t])})),delete a._touchHandlers[s.context._uid]}const d={inserted:c,unbind:u};e["Z"]=d},8494:function(t,e,s){s.d(e,{Z:function(){return b}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-responsive",{staticClass:"mx-auto"},[s("v-card",{staticClass:"pb-4",attrs:{color:"teal",dark:""}},[s("v-row",[s("v-col",{staticClass:"mx-0",attrs:{cols:"12"}},[s("v-card-title",{staticClass:"ml-4 text-h5 font-weight-black"},[t._v(" "+t._s(t.title)+" ")]),s("v-card-subtitle",{staticClass:"mx-4 pb-0"},[t._v(" "+t._s(t.subtitle)+" ")])],1),s("v-col",{staticClass:"pa-0 justify-star text-left",attrs:{cols:"6"}},[s("v-btn",{staticClass:"mx-4 pa-0",attrs:{text:""},on:{click:t.voltar}},[s("v-icon",[t._v(" mdi-arrow-left-drop-circle-outline ")])],1)],1),s("v-col",{staticClass:"pa-0 justify-end text-right",attrs:{cols:"6"}},[s("v-btn",{staticClass:"pa-0 mx-4",attrs:{text:""},on:{click:t.help}},[s("v-icon",[t._v(" mdi-help ")])],1)],1)],1)],1)],1)},a=[],r={name:"TitleToolbarListTeal",props:{title:{type:String,default(){return""}},subtitle:{type:String,default(){return""}}},data:()=>({search:null}),computed:{},methods:{voltar(){return window.history.back()},help(){switch(this.$route.name){case"Gerenciar Parâmetros":this.$router.push("ajuda/parametros");break;case"Gerenciar Usuarios":this.$router.push("ajuda/usuarios");break;default:break}console.log(this.$route.name)}}},n=r,o=s(3736),l=s(3453),c=s.n(l),u=s(4562),d=s(4145),h=s(4886),p=s(266),m=s(4324),v=s(9422),f=s(1713),g=(0,o.Z)(n,i,a,!1,null,null,null),b=g.exports;c()(g,{VBtn:u.Z,VCard:d.Z,VCardSubtitle:h.Qq,VCardTitle:h.EB,VCol:p.Z,VIcon:m.Z,VResponsive:v.Z,VRow:f.Z})},9797:function(t,e,s){s.r(e),s.d(e,{default:function(){return T}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("titleToolbarListTealVue",{attrs:{title:t.title,subtitle:t.subtitle}}),s("br"),s("v-card",{staticClass:"mx-auto",attrs:{tile:""}},[s("v-row",{staticClass:"px-4 text-left",attrs:{tag:"v-card-text"}},[s("v-col",{staticClass:"text-left",attrs:{sm:"12",md:"5"}},[s("v-card",[s("v-card-title",[s("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar Usuário","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.usuarios,search:t.search,loading:!t.listaCarregada,"loading-text":"Carregando... Usuários","single-select":!0,"item-key":"name","show-select":""},model:{value:t.selecionado,callback:function(e){t.selecionado=e},expression:"selecionado"}})],1)],1),s("v-divider",{attrs:{vertical:""}}),t.foiSelecionado?s("v-col",{staticClass:"d-flex text-center",attrs:{sm:"12",md:"7"}},[s("v-scroll-y-transition",{attrs:{mode:"out-in"}},[s("v-card",{staticClass:"py-6 mx-auto",attrs:{flat:""}},[s("v-card-text",[s("h3",{staticClass:"text-h5 mb-2"},[t._v(" "+t._s(t.selecionado[0].name)+" ")]),s("div",{staticClass:"blue--text mb-2"},[t._v(" "+t._s(t.selecionado[0].email)+" ")])]),s("v-divider",{staticClass:"my-2"}),s("v-col",{staticClass:"text-center py-4 my-4 d-flex"},[s("v-form",{ref:"form",staticClass:"pa-2 white ma-2",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-list-item",{attrs:{"two-line":""}},[s("v-list-item-content",[s("v-list-item-title",[t._v(" Administrador do Sistema ")]),s("v-list-item-subtitle",{staticClass:"d-flex justify-center mx-auto"},[s("v-switch",{staticClass:"mx-2",attrs:{label:t.selecionado[0].admin?"SIM":"NÃO",id:"switchh"},model:{value:t.selecionado[0].admin,callback:function(e){t.$set(t.selecionado[0],"admin",e)},expression:"selecionado[0].admin"}})],1)],1)],1),s("v-list-item",{attrs:{"two-line":""}},[s("v-list-item-content",[s("v-list-item-title",[t._v(" Usuário do Manager ")]),s("v-list-item-subtitle",{staticClass:"d-flex justify-center mx-auto"},[s("v-switch",{staticClass:"mx-2 text-center",attrs:{label:t.selecionado[0].manager?"SIM":"NÃO",id:"switchh"},model:{value:t.selecionado[0].manager,callback:function(e){t.$set(t.selecionado[0],"manager",e)},expression:"selecionado[0].manager"}})],1)],1)],1),s("v-col",[s("v-btn",{staticClass:"mx-2",attrs:{color:"success",disabled:!t.valid,dark:"",title:"Salvar"},on:{click:t.validate}},[t._v(" Salvar "),s("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-content-save ")])],1)],1),s("v-divider"),s("v-list-item",{staticClass:"mt-6",attrs:{"two-line":""}},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"subtitle-1"},[t._v(" Atualizado ")]),s("v-list-item-subtitle",{staticClass:"subtitle-2"},[t._v(" "+t._s(t.selecionado[0].changed)+" ")])],1)],1)],1)],1)],1)],1)],1):t._e()],1)],1)],1)},a=[],r=s(6846);const n="/users";var o={async getListaUsuarios(){try{const t=await(0,r.Z)().get(n+"/list");return t.status,t}catch(t){return console.log(t),t.response?t.response:(t.request,t)}},async updateUsuario(t){try{const e=await(0,r.Z)().put(n+"/update",t).then((t=>t)).catch((t=>t.response));return e}catch(e){return console.log(e),e.response?e.response:(e.request,console.log(e),e)}}},l=s(3391),c=s(8494);const u=t=>new Promise((e=>setTimeout(e,t)));var d={mixins:[l.Z],components:{titleToolbarListTealVue:c.Z},props:{},data:()=>({active:[],open:[],users:[],usuarios:[],selecionado:[],usuarioEditado:{},perfis:["Técnico","Administrador"],loading:!1,loader:null,formRegister:{id:"",admin:!1,manager:!1},switch:!0,valid:!1,openSalvar:!1,ultimoEstadoSalvar:!1,subtitle:"LIstagem dos usuários",title:"Gerenciar Usuários",caseSensitive:!1,search:"",headers:[{text:"Usuário",align:"start",filterable:!0,value:"name"}]}),mounted(){this.ultimoEstadoSalvar=this.formRegister.admin},computed:{foiSelecionado(){return Object.keys(this.selecionado).length>0},listaCarregada(){return Object.keys(this.usuarios).length>0},filter(){return this.caseSensitive?(t,e,s)=>t[s].indexOf(e)>-1:void 0}},watch:{"formRegister.admin"(){this.openSalvar=!0},selecionado:{handler:function(t){void 0!=typeof t[0].admin&&(this.selecionado[0].manager=t[0].admin)},deep:!0}},created(){this.getUsuarios()},methods:{updateForm(){},validate(){this.$refs.form.validate()&&this.updateUsuario()},async updateUsuario(){try{this.formRegister={id:this.selecionado[0]._id,admin:this.selecionado[0].admin,manager:this.selecionado[0].manager};const t=await o.updateUsuario(this.formRegister);if(200!=t.status)return l.Z.methods.messageSwalToast("error",t.data.message);l.Z.methods.messageSwalToast("success","Usuário atualizado sucesso!"),await u(1e3),this.$router.go()}catch(t){return l.Z.methods.messageSwalToast("error","Tente novamentemais tarde! "+t.data.message)}},setLoader(){this.loader="loading";const t=this.loader;this[t]=!this[t],setTimeout((()=>this[t]=!1),1e3),this.loader=null},userSelecionado(t){this.selecionado={...t}},getImgUrl(t){return t},async getUsuarios(){try{const t=await o.getListaUsuarios();if("undefined"==typeof t||200!=t.status)return l.Z.methods.messageSwalToast("error","Não foi possível carregar os usuários, tente novamente mais tarde!");this.setLoader(),await u(1e3),this.usuarios=t.data}catch(t){return l.Z.methods.messageSwalToast("error","Não foi possível carregar os usuários, tente novamente mais tarde!")}},atualizaLista(){this.selecionado=[]}}},h=d,p=s(3736),m=s(3453),v=s.n(m),f=s(4562),g=s(4145),b=s(4886),C=s(266),y=s(2118),w=s(5151),S=s(9223),_=s(5125),x=s(4324),V=s(4525),Z=s(8627),k=s(1713),$=s(7394),j=s(1023),B=s(7808),E=(0,p.Z)(h,i,a,!1,null,null,null),T=E.exports;v()(E,{VBtn:f.Z,VCard:g.Z,VCardText:b.ZB,VCardTitle:b.EB,VCol:C.Z,VContainer:y.Z,VDataTable:w.Z,VDivider:S.Z,VForm:_.Z,VIcon:x.Z,VListItem:V.Z,VListItemContent:Z.km,VListItemSubtitle:Z.oZ,VListItemTitle:Z.V9,VRow:k.Z,VScrollYTransition:$.OM,VSwitch:j.Z,VTextField:B.Z})}}]);
//# sourceMappingURL=465.7489f681.js.map